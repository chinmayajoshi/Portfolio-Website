<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ personal_info.name }} - {{ personal_info.tagline }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Space+Mono:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="icon" href="https://placehold.co/32x32/000000/FFFFFF?text=P" type="image/x-icon">
</head>
<body class="no-scroll"> <!-- Initially prevent scrolling -->
    <!-- Theme toggle switch -->
    <div class="theme-switch-wrapper">
        <label class="theme-switch" for="checkbox">
            <input type="checkbox" id="checkbox" />
            <div class="slider round"></div>
        </label>
    </div>

    <!-- Animated Mascot -->
    <div id="animated-mascot">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <g class="owl-body"><path d="M50 95C25 95 5 75 5 50S25 5 50 5s45 20 45 45-20 45-45 45z" fill="#8d6e63"/><path d="M50 90C28 90 10 72 10 50S28 10 50 10s40 18 40 40-18 40-40 40z" fill="#a1887f"/><circle cx="35" cy="45" r="12" fill="white"/><circle cx="65" cy="45" r="12" fill="white"/><circle cx="35" cy="45" r="5" fill="black"/><circle cx="65" cy="45" r="5" fill="black"/><path d="M45 65l5 10 5-10z" fill="#ffab00"/></g>
            <g class="owl-hat"><path d="M30 30h40v5H30z" fill="#3e2723"/><path d="M35 15h30v15H35z" fill="#4e342e"/></g>
        </svg>
    </div>
    <div id="owl-click-counter" class="click-counter"></div>

    <!-- Interactive Terminal -->
    <div id="terminal-popup" class="terminal-window hidden">
        <div class="terminal-header"><div class="terminal-buttons"><span class="dot red" id="terminal-close"></span><span class="dot yellow"></span><span class="dot green"></span></div><div class="terminal-title">user@portfolio.dev</div></div>
        <div id="terminal-body" class="terminal-body"><div id="terminal-output"></div><div class="terminal-input-line"><span class="prompt">$&nbsp;</span><input type="text" id="terminal-input" class="terminal-input" autocomplete="off" autofocus></div></div>
    </div>
    <button id="terminal-toggle" class="terminal-toggle-btn" title="Open Terminal"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg></button>

    <!-- Background Canvas -->
    <canvas id="background-canvas"></canvas>
    
    <!-- Hidden data for JS -->
    <script id="projects-data" type="application/json">{{ projects | tojson }}</script>
    <div id="about-data" style="display: none;">{{ personal_info.about }}</div>

    <!-- Sidebar Navigation -->
    <nav class="sidebar-nav">
        <a href="#work-experience" class="nav-button" data-target="#work-experience">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            <span>Work</span>
        </a>
        <a href="#volunteer-projects" class="nav-button" data-target="#volunteer-projects">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
            <span>Volunteer</span>
        </a>
        <a href="#personal-projects" class="nav-button" data-target="#personal-projects">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect></svg>
            <span>Projects</span>
        </a>
        <a href="#blog" class="nav-button" data-target="#blog">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
            <span>Blog</span>
        </a>
        <a href="#technical-skills" class="nav-button" data-target="#technical-skills">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
            <span>Skills</span>
        </a>
        <a href="#resume" class="nav-button" data-target="#resume">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
            <span>Resume</span>
        </a>
    </nav>

    <div class="container">
        <header class="landing">
            <div class="landing-content">
                <h1>{{ personal_info.name }}</h1>
                <p>{{ personal_info.tagline }}</p>
                <div class="landing-socials">
                    <a href="https://github.com/{{ personal_info.github_username }}" target="_blank" rel="noopener noreferrer" class="social-link" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a>
                    <a href="https://linkedin.com/in/{{ personal_info.linkedin_profile }}" target="_blank" rel="noopener noreferrer" class="social-link" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a>
                    <a href="mailto:{{ personal_info.email }}" class="social-link" title="Email"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a>
                    <a href="https://{{ personal_info.substack }}.substack.com/" target="_blank" rel="noopener noreferrer" class="social-link" title="Blog/Substack"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg></a>
                </div>
            </div>
        </header>

        <main class="hidden">
            <section id="work-experience">
                <button class="section-close-btn" title="Close Section">&times;</button>
                <h2>Work Experience</h2>
                <div class="experience-list">{% for job in work_experiences %}<div class="experience-item"><div class="experience-header"><h3>{{ job.company }}</h3><p>{{ job.location }}</p></div><div class="experience-subheader"><h4>{{ job.role }}</h4><p>{{ job.year }}</p></div><ul class="experience-description">{% for point in job.description %}<li>{{ point }}</li>{% endfor %}</ul></div>{% endfor %}</div>
            </section>
            <section id="volunteer-projects">
                <button class="section-close-btn" title="Close Section">&times;</button>
                <h2>Volunteer Projects</h2>
                <div class="experience-list">{% for job in volunteer_experiences %}<div class="experience-item"><div class="experience-header"><h3>{{ job.company }}</h3><p>{{ job.location }}</p></div><div class="experience-subheader"><h4>{{ job.role }}</h4><p>{{ job.year }}</p></div><ul class="experience-description">{% for point in job.description %}<li>{{ point }}</li>{% endfor %}</ul></div>{% endfor %}</div>
            </section>
            <section id="personal-projects">
                <button class="section-close-btn" title="Close Section">&times;</button>
                <h2>Personal Projects</h2>
                <div class="project-filters"><button class="filter-btn active" data-filter="all">All</button>{% for category in projects|map(attribute='category')|unique|sort %}<button class="filter-btn" data-filter="{{ category|lower }}">{{ category }}</button>{% endfor %}</div>
                <div class="project-grid">{% for project in projects %}<div class="project-tile" data-category="{{ project.category|lower }}" data-project-id="{{ project.id }}"><div class="project-content"><h3>{{ project.title }}</h3><span>{{ project.category }}</span></div><div class="project-tile-actions"><button class="project-action-btn" title="View Details"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg></button><a href="{{ project.github_link }}" target="_blank" rel="noopener noreferrer" class="project-action-btn" title="View on GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></div></div>{% endfor %}</div>
            </section>
            <section id="blog">
                <button class="section-close-btn" title="Close Section">&times;</button>
                <h2>From the Blog</h2>
                <div class="blog-list">{% for post in blogs %}<a href="{{ post.link }}" target="_blank" rel="noopener noreferrer" class="blog-post-item"><div class="blog-post-header"><h3>{{ post.title }}</h3><p class="blog-date">{{ post.date }}</p></div><p class="blog-summary">{{ post.summary }}</p></a>{% endfor %}</div>
            </section>
            <section id="technical-skills">
                <button class="section-close-btn" title="Close Section">&times;</button>
                <h2>Technical Skills</h2>
                <div class="skill-cloud">{% for skill in skills %}<span class="skill-tag">{{ skill }}</span>{% endfor %}</div>
            </section>
            <section id="resume">
                <button class="section-close-btn" title="Close Section">&times;</button>
                <h2>Resume</h2>
                <div class="resume-link"><a href="{{ personal_info.resume_link }}" target="_blank" class="btn">Download My Resume</a></div>
            </section>
        </main>
    </div>
    
    <!-- RESTORED: Project Modal Structure -->
    <div id="project-modal-backdrop" class="modal-backdrop hidden"></div>
    <div id="project-modal" class="modal hidden">
        <button id="modal-close-btn" class="modal-close" title="Close">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
        <div class="modal-content">
            <h2 id="modal-title">Project Title</h2>
            <div id="modal-description"></div>
            <h3>Tech Stack</h3>
            <div id="modal-tech-stack" class="skill-cloud"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}" defer></script>
</body>
</html>